# Makefile automatically generated by MakeItSo,
# located at https://code.google.com/p/make-it-so/,
# and modified for GameTime.

CSHARP_COMPILER = @WINDIR_UNIX@/Microsoft.NET/Framework/v3.5/Csc.exe
FILES = BasicBlockAddendum.cs \
        c2Phase.cs \
        ExecutionHelper.cs \
        ExpressionHelper.cs \
        FunctionUnitHelper.cs \
        Path.cs \
        PhoenixHelper.cs \
        SmtHelper.cs

PHOENIX_SDK_DIR = "@PROGRAM_FILES@/Phoenix SDK June 2008"
DEBUG_REFERENCES = -r:$(PHOENIX_SDK_DIR)/bin/debug/architecture-msild.dll,$(PHOENIX_SDK_DIR)/bin/debug/architecture-x86d.dll,$(PHOENIX_SDK_DIR)/bin/debug/x86/c2.dll,$(PHOENIX_SDK_DIR)/bin/debug/phxd.dll,$(PHOENIX_SDK_DIR)/bin/debug/runtime-vccrt-win-msild.dll,$(PHOENIX_SDK_DIR)/bin/debug/runtime-vccrt-win32-x86d.dll,../Utilities/bin/Debug/Utilities.dll
RELEASE_REFERENCES = -r:$(PHOENIX_SDK_DIR)/bin/debug/architecture-msild.dll,$(PHOENIX_SDK_DIR)/bin/debug/architecture-x86d.dll,$(PHOENIX_SDK_DIR)/bin/debug/x86/c2.dll,$(PHOENIX_SDK_DIR)/bin/debug/phxd.dll,$(PHOENIX_SDK_DIR)/bin/debug/runtime-vccrt-win-msild.dll,$(PHOENIX_SDK_DIR)/bin/debug/runtime-vccrt-win32-x86d.dll,../Utilities/bin/Release/Utilities.dll

DEBUG_FLAGS = -optimize- -define:DEBUG -define:TRACE \
              -define:PHX_DEBUG_SUPPORT -define:PHX_DEBUG_DUMPS \
              -define:PHX_DEBUG_CHECKS -debug+ -debug:full \
              -nowarn:1701,1702 -filealign:512 -warn:4
RELEASE_FLAGS = -optimize+ -define:TRACE -define:PHX_DEBUG_SUPPORT \
                -define:PHX_DEBUG_DUMPS -debug:pdbonly -nowarn:1701,1702 \
                -filealign:512 -warn:4

OUTPUT_FILE = GameTime.dll
DEBUG_OUTPUT_DIR = bin/Debug
RELEASE_OUTPUT_DIR = bin/Release
TARGET = library

# Builds all configurations for this project.
.PHONY: build_all_configurations
build_all_configurations: Debug Release 

# Builds the Debug configuration.
.PHONY: Debug
Debug: create_folders $(FILES)
	$(CSHARP_COMPILER) $(DEBUG_REFERENCES) $(DEBUG_FLAGS) \
		-out:$(DEBUG_OUTPUT_DIR)/$(OUTPUT_FILE) -target:$(TARGET) $(FILES)

# Builds the Release configuration.
.PHONY: Release
Release: create_folders $(FILES)
	$(CSHARP_COMPILER) $(RELEASE_REFERENCES) $(RELEASE_FLAGS) \
		-out:$(RELEASE_OUTPUT_DIR)/$(OUTPUT_FILE) -target:$(TARGET) $(FILES)

# Creates the output folders for each configuration, and copies references.
.PHONY: create_folders
create_folders:
	mkdir -p $(DEBUG_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/architecture-x86d.dll \
		$(DEBUG_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/x86/c2.dll $(DEBUG_OUTPUT_DIR)
	cp ../Utilities/bin/Debug/Utilities.dll $(DEBUG_OUTPUT_DIR)
	mkdir -p $(RELEASE_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/architecture-x86d.dll \
		$(RELEASE_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/x86/c2.dll $(RELEASE_OUTPUT_DIR)
	cp ../Utilities/bin/Release/Utilities.dll $(RELEASE_OUTPUT_DIR)

# Cleans output files.
.PHONY: clean
clean:
	rm -rf $(DEBUG_OUTPUT_DIR)
	rm -rf $(RELEASE_OUTPUT_DIR)
