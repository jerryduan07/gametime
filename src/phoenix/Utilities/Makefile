# Makefile automatically generated by MakeItSo,
# located at https://code.google.com/p/make-it-so/,
# and modified for GameTime.

CSHARP_COMPILER = /cygdrive/c/WINDOWS/Microsoft.NET/Framework/v3.5/Csc.exe
FILES = AggregateField.cs \
        Configuration.cs \
        Expression.cs \
        Operator.cs \
        Pair.cs \
        ProjectConfiguration.cs

PHOENIX_SDK_DIR = "C:\Program Files (x86)/Phoenix SDK June 2008"
DEBUG_REFERENCES = -r:$(PHOENIX_SDK_DIR)/bin/debug/phxd.dll
RELEASE_REFERENCES = -r:$(PHOENIX_SDK_DIR)/bin/debug/phxd.dll

DEBUG_FLAGS = -optimize- -define:DEBUG -define:TRACE -debug+ -debug:full \
              -nowarn:1701,1702 -filealign:512 -warn:4
RELEASE_FLAGS = -optimize+ -define:TRACE -debug:pdbonly -nowarn:1701,1702 \
                -filealign:512 -warn:4

OUTPUT_FILE = Utilities.dll
DEBUG_OUTPUT_DIR = bin/Debug
RELEASE_OUTPUT_DIR = bin/Release
TARGET = library

# Builds all configurations for this project.
.PHONY: build_all_configurations
build_all_configurations: Debug Release 

# Builds the Debug configuration.
.PHONY: Debug
Debug: create_folders $(FILES)
	$(CSHARP_COMPILER) $(DEBUG_REFERENCES) $(DEBUG_FLAGS) \
		-out:$(DEBUG_OUTPUT_DIR)/$(OUTPUT_FILE) -target:$(TARGET) $(FILES)

# Builds the Release configuration.
.PHONY: Release
Release: create_folders $(FILES)
	$(CSHARP_COMPILER) $(RELEASE_REFERENCES) $(RELEASE_FLAGS) \
		-out:$(RELEASE_OUTPUT_DIR)/$(OUTPUT_FILE) -target:$(TARGET) $(FILES)

# Creates the output folders for each configuration, and copies references.
.PHONY: create_folders
create_folders:
	mkdir -p $(DEBUG_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/phxd.dll $(DEBUG_OUTPUT_DIR)
	mkdir -p $(RELEASE_OUTPUT_DIR)
	cp $(PHOENIX_SDK_DIR)/bin/debug/phxd.dll $(RELEASE_OUTPUT_DIR)

# Cleans output files.
.PHONY: clean
clean:
	rm -f $(DEBUG_OUTPUT_DIR)/*.*
	rm -f $(RELEASE_OUTPUT_DIR)/*.*
